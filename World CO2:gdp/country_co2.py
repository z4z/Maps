countries = {
"ad": "Andorra",
"ae": "United Arab Emirates",
"af": "Afghanistan",
"ag": "Antigua and Barbuda",
"al": "Albania",
"am": "Armenia",
"ao": "Angola",
"ar": "Argentina",
"at": "Austria",
"au": "Australia",
"ax": "Aland Islands",
"az": "Azerbaijan",
"ba": "Bosnia and Herzegovina",
"bb": "Barbados",
"bd": "Bangladesh",
"be": "Belgium",
"bf": "Burkina Faso",
"bg": "Bulgaria",
"bh": "Bahrain",
"bi": "Burundi",
"bj": "Benin",
"bm": "Bermuda",
"bn": "Brunei",
"bo": "Bolivia",
"bq": "Bonaire, Sint Eustatius and Saba",
"br": "Brazil",
"bs": "Bahamas",
"bt": "Bhutan",
"bv": "Bouvet Island",
"bw": "Botswana",
"by": "Belarus",
"bz": "Belize",
"ca": "Canada",
"cc": "Cocos (Keeling) Islands",
"cd": "Congo, Dem. Rep.",
"cf": "Central African Republic",
"cg": "Congo, Rep.",
"ch": "Switzerland",
"ci": "Cote d'Ivoire",
"cl": "Chile",
"cm": "Cameroon",
"cn": "China",
"co": "Colombia",
"cr": "Costa Rica",
"cu": "Cuba",
"cw": "Curacao",
"cx": "Christmas Island",
"cy": "Cyprus",
"cz": "Czech Republic",
"de": "Germany",
"dj": "Djibouti",
"dk": "Denmark",
"dm": "Dominica",
"do": "Dominican Republic",
"dz": "Algeria",
"ec": "Ecuador",
"ee": "Estonia",
"eg": "Egypt",
"eh": "Western Sahara",
"er": "Eritrea",
"es": "Spain",
"et": "Ethiopia",
"fi": "Finland",
"fj": "Fiji",
"fk": "Argentina",
"fm": "Micronesia, Fed. Sts.",
"fr": "France",
"fx": "France",
"gp": "France",
"mq": "France",
"re": "France",
"ga": "Gabon",
"gb": "United Kingdom",
"gd": "Grenada",
"ge": "Georgia",
"gf": "France",
"gh": "Ghana",
"gm": "Gambia",
"gn": "Guinea",
"gq": "Equatorial Guinea",
"gr": "Greece",
"gs": "South Georgia and the South Sandwich Islands",
"gt": "Guatemala",
"gw": "Guinea-Bissau",
"gy": "Guyana",
"hk": "Hong Kong",
"hm": "Heard Island and McDonald Islands",
"hn": "Honduras",
"hr": "Croatia",
"ht": "Haiti",
"hu": "Hungary",
"id": "Indonesia",
"ie": "Ireland",
"il": "Israel",
"in": "India",
"io": "British Indian Ocean Territory",
"iq": "Iraq",
"ir": "Iran",
"is": "Iceland",
"it": "Italy",
"jm": "Jamaica",
"jo": "Jordan",
"jp": "Japan",
"ke": "Kenya",
"kg": "Kyrgyzstan",
"kh": "Cambodia",
"ki": "Kiribati",
"km": "Comoros",
"kr": "South Korea",
"kw": "Kuwait",
"kz": "Kazakhstan",
"la": "Laos",
"lb": "Lebanon",
"lk": "Sri Lanka",
"lr": "Liberia",
"ls": "Lesotho",
"lt": "Lithuania",
"lu": "Luxembourg",
"lv": "Latvia",
"ly": "Libya",
"ma": "Morocco",
"md": "Moldova",
"me": "Montenegro",
"mg": "Madagascar",
"mh": "Marshall Islands",
"mk": "Macedonia, FYR",
"ml": "Mali",
"mm": "Myanmar",
"mn": "Mongolia",
"mo": "Macao",
"mr": "Mauritania",
"mt": "Malta",
"mu": "Mauritius",
"mv": "Maldives",
"mw": "Malawi",
"mx": "Mexico",
"my": "Malaysia",
"mz": "Mozambique",
"na": "Namibia",
"ne": "Niger",
"nf": "Norfolk Island",
"ng": "Nigeria",
"ni": "Nicaragua",
"nl": "Netherlands",
"no": "Norway",
"np": "Nepal",
"nz": "New Zealand",
"om": "Oman",
"pa": "Panama",
"pe": "Peru",
"pg": "Papua New Guinea",
"ph": "Philippines",
"pk": "Pakistan",
"pl": "Poland",
"pr": "United States",
"ps": "Israel",
"pt": "Portugal",
"pw": "Palau",
"py": "Paraguay",
"qa": "Qatar",
"ro": "Romania",
"rs": "Serbia",
"ru": "Russia",
"rw": "Rwanda",
"sa": "Saudi Arabia",
"sb": "Solomon Islands",
"sc": "Seychelles",
"sd": "Sudan",
"se": "Sweden",
"sg": "Singapore",
"si": "Slovenia",
"sj": "Svalbard and Jan Mayen",
"sk": "Slovakia",
"sl": "Sierra Leone",
"sn": "Senegal",
"so": "Somalia",
"sr": "Suriname",
"ss": "South Sudan",
"st": "Sao Tome and Principe",
"sv": "El Salvador",
"sx": "Sint Maarten (Dutch part)",
"sy": "Syria",
"sz": "Swaziland",
"td": "Chad",
"tf": "French Southern Territories",
"tg": "Togo",
"th": "Thailand",
"tj": "Tajikistan",
"tk": "Tokelau",
"tl": "Timor-Leste",
"tm": "Turkmenistan",
"tn": "Tunisia",
"to": "Tonga",
"tr": "Turkey",
"tt": "Trinidad and Tobago",
"tw": "China",
"tz": "Tanzania",
"ua": "Ukraine",
"ug": "Uganda",
"um": "United States Minor Outlying Islands",
"us": "United States",
"uy": "Uruguay",
"uz": "Uzbekistan",
"ve": "Venezuela",
"vn": "Vietnam",
"vu": "Vanuatu",
"ws": "Samoa",
"ye": "Yemen",
"za": "South Africa",
"zm": "Zambia",
"zw": "Zimbabwe"
}

co2 = {
"Afghanistan": 6310,
"Albania": 3010,
"Algeria": 121300,
"Andorra": 520,
"Angola": 26650,
"Anguilla": 60,
"Antigua and Barbuda": 460,
"Argentina": 174700,
"Armenia": 4490,
"Aruba": 2300,
"Australia": 400160,
"Austria": 62310,
"Azerbaijan": 49070,
"Bahamas": 2590,
"Bahrain": 24220,
"Bangladesh": 51030,
"Barbados": 1570,
"Belarus": 60290,
"Belgium": 103580,
"Belize": 410,
"Benin": 4850,
"Bermuda": 470,
"Bhutan": 420,
"Bolivia": 14490,
"Bosnia and Herzegovina": 30100,
"Botswana": 4430,
"Brazil": 367110,
"British Virgin Islands": 110,
"Brunei": 9280,
"Bulgaria": 42800,
"Burkina Faso": 1670,
"Burundi": 190,
"Cambodia": 4610,
"Cameroon": 6670,
"Canada": 513890,
"Cape Verde": 320,
"Cayman Islands": 510,
"Central African Republic": 230,
"Chad": 410,
"Chile": 66730,
"China": 7686420,
"Colombia": 71230,
"Comoros": 120,
"Congo, Dem. Rep.": 2700,
"Congo, Rep.": 1940,
"Cook Is": 70,
"Costa Rica": 8320,
"Cote d'Ivoire": 6600,
"Croatia": 21530,
"Cuba": 31610,
"Cyprus": 8200,
"Czech Republic": 108110,
"Denmark": 45690,
"Djibouti": 530,
"Dominica": 130,
"Dominican Republic": 20330,
"Ecuador": 30100,
"Egypt": 216120,
"El Salvador": 6300,
"Equatorial Guinea": 4810,
"Eritrea": 510,
"Estonia": 15950,
"Ethiopia": 7890,
"Faeroe Islands": 710,
"Falkland Is (Malvinas)": 60,
"Fiji": 850,
"Finland": 53560,
"France": 363320,
"French Guiana": 700,
"French Polynesia": 890,
"Gabon": 1620,
"Gambia": 440,
"Georgia": 5840,
"Germany": 734530,
"Ghana": 7440,
"Gibraltar": 430,
"Greece": 94910,
"Greenland": 580,
"Grenada": 250,
"Guadeloupe": 1740,
"Guatemala": 15200,
"Guinea": 1230,
"Guinea-Bissau": 290,
"Guyana": 1550,
"Haiti": 2270,
"Honduras": 7700,
"Hong Kong, China": 36990,
"Hungary": 48670,
"Iceland": 2030,
"India": 1979240,
"Indonesia": 451740,
"Iran": 602000,
"Iraq": 109030,
"Ireland": 41640,
"Israel": 67210,
"Italy": 400800,
"Jamaica": 8570,
"Japan": 1101030,
"Jordan": 22550,
"Kazakhstan": 225780,
"Kenya": 12350,
"Kiribati": 50,
"North Korea": 75100,
"South Korea": 509330,
"Kuwait": 80200,
"Kyrgyzstan": 6720,
"Laos": 1810,
"Latvia": 6650,
"Lebanon": 20970,
"Lesotho": 17,
"Liberia": 520,
"Libya": 62870,
"Lithuania": 12840,
"Luxembourg": 10140,
"Macao, China": 1470,
"Macedonia, FYR": 11340,
"Madagascar": 1820,
"Malawi": 1060,
"Malaysia": 198330,
"Maldives": 1030,
"Mali": 610,
"Malta": 2500,
"Marshall Islands": 100,
"Martinique": 2290,
"Mauritania": 2080,
"Mauritius": 3820,
"Mexico": 446200,
"Micronesia, Fed. Sts.": 60,
"Moldova": 4550,
"Mongolia": 14500,
"Montenegro": 3050,
"Montserrat": 80,
"Morocco": 48810,
"Mozambique": 2600,
"Myanmar": 11090,
"Namibia": 3590,
"Nauru": 150,
"Nepal": 3520,
"Netherlands": 169630,
"Netherlands Antilles": 6130,
"New Caledonia": 2970,
"New Zealand": 32060,
"Nicaragua": 4460,
"Niger": 1160,
"Nigeria": 70230,
"Niue": 0,
"Norway": 47070,
"Oman": 41140,
"Pakistan": 161210,
"Palau": 210,
"Panama": 7840,
"Papua New Guinea": 3480,
"Paraguay": 4520,
"Peru": 47350,
"Philippines": 68540,
"Poland": 298880,
"Portugal": 57390,
"Qatar": 70340,
"Reunion": 2930,
"Romania": 79480,
"Russia": 1574240,
"Rwanda": 730,
"St. Helena": 10,
"St. Kitts and Nevis": 260,
"St. Lucia": 390,
"St. Vincent and the Grenadines": 200,
"St.-Pierre-et-Miquelon": 70,
"Samoa": 160,
"Sao Tome and Principe": 130,
"Saudi Arabia": 432730,
"Senegal": 4580,
"Serbia": 46250,
"Seychelles": 740,
"Sierra Leone": 1420,
"Singapore": 31890,
"Slovakia": 33890,
"Slovenia": 15290,
"Solomon Islands": 200,
"Somalia": 590,
"South Africa": 498970,
"Spain": 288200,
"Sri Lanka": 12660,
"Sudan": 14340,
"Suriname": 2470,
"Swaziland": 1020,
"Sweden": 43740,
"Switzerland": 41590,
"Syria": 65310,
"Taiwan": 239090,
"Tajikistan": 2830,
"Tanzania": 6960,
"Thailand": 271700,
"Timor-Leste": 180,
"Togo": 1490,
"Tonga": 180,
"Trinidad and Tobago": 47780,
"Tunisia": 25150,
"Turkey": 277820,
"Turkmenistan": 48160,
"Turks and Caicos Islands": 160,
"Uganda": 3480,
"Ukraine": 272150,
"United Arab Emirates": 156810,
"United Kingdom": 474540,
"United States": 5299080,
"Uruguay": 7890,
"Uzbekistan": 116500,
"Wallis et Futuna": 30,
"Vanuatu": 120,
"Venezuela": 184780,
"West Bank and Gaza": 2160,
"Western Sahara": 240,
"Vietnam": 142240,
"Yemen": 23990,
"Zambia": 1980,
"Zimbabwe": 8910,
"South Sudan": 0
}

gdp = {
    "United States":  17419000 ,
    "China":  10360105 ,
    "Japan":  4601461 ,
    "Germany":  3852556 ,
    "United Kingdom":  2941886 ,
    "France":  2829192 ,
    "Brazil":  2346118 ,
    "Italy":  2144338 ,
    "India":  2066902 ,
    "Russia":  1860598 ,
    "Canada":  1786655 ,
    "Australia":  1453770 ,
    "South Korea":  1410383 ,
    "Spain":  1404307 ,
    "Mexico":  1282720 ,
    "Indonesia":  888538 ,
    "Netherlands":  869508 ,
    "Turkey":  799535 ,
    "Saudi Arabia":  746249 ,
    "Switzerland":  685434 ,
    "Sweden":  570591 ,
    "Nigeria":  568508 ,
    "Poland":  548003 ,
    "Argentina":  540197 ,
    "Belgium":  533383 ,
    "Venezuela":  509964 ,
    "Norway":  500103 ,
    "Austria":  436344 ,
    "Iran":  415339 ,
    "United Arab Emirates":  401647 ,
    "Colombia":  377740 ,
    "Thailand":  373804 ,
    "South Africa":  349817 ,
    "Denmark":  341952 ,
    "Malaysia":  326933 ,
    "Singapore":  307872 ,
    "Israel":  304226 ,
    "Hong Kong SAR, China":  290896 ,
    "Egypt":  286538 ,
    "Philippines":  284582 ,
    "Finland":  270674 ,
    "Chile":  258062 ,
    "Pakistan":  246876 ,
    "Ireland":  245921 ,
    "Greece":  237592 ,
    "Portugal":  229584 ,
    "Iraq":  220506 ,
    "Algeria":  214063 ,
    "Kazakhstan":  212248 ,
    "Qatar":  211817 ,
    "Czech Republic":  205523 ,
    "Peru":  202903 ,
    "Romania":  199044 ,
    "New Zealand":  188385 ,
    "Vietnam":  186205 ,
    "Kuwait":  175827 ,
    "Bangladesh":  173819 ,
    "Hungary":  137104 ,
    "Ukraine":  131805 ,
    "Angola":  131401 ,
    "Morocco":  107005 ,
    "Puerto Rico":  103135 ,
    "Ecuador":  100543 ,
    "Slovakia":  99790 ,
    "Oman":  81797 ,
    "Cuba":  77150 ,
    "Belarus":  76139 ,
    "Azerbaijan":  75198 ,
    "Sri Lanka":  74941 ,
    "Sudan":  73815 ,
    "Myanmar":  64330 ,
    "Dominican Republic":  63969 ,
    "Uzbekistan":  62644 ,
    "Kenya":  60937 ,
    "Luxembourg":  60131 ,
    "Guatemala":  58728 ,
    "Uruguay":  57471 ,
    "Croatia":  57223 ,
    "Bulgaria":  55735 ,
    "Macao SAR, China":  55502 ,
    "Ethiopia":  54798 ,
    "Costa Rica":  49553 ,
    "Slovenia":  49416 ,
    "Tanzania":  49184 ,
    "Lithuania":  48172 ,
    "Turkmenistan":  47932 ,
    "Tunisia":  46995 ,
    "Panama":  46213 ,
    "Lebanon":  45731 ,
    "Serbia":  43866 ,
    "Libya":  41119 ,
    "Ghana":  38648 ,
    "Yemen":  35955 ,
    "Jordan":  35827 ,
    "Cote d'Ivoire":  34254 ,
    "Bolivia":  34176 ,
    "Bahrain":  33869 ,
    "Congo, Dem. Rep.":  32962 ,
    "Cameroon":  32549 ,
    "Latvia":  31921 ,
    "Paraguay":  30985 ,
    "Zambia":  27066 ,
    "Uganda":  26312 ,
    "Estonia":  25905 ,
    "El Salvador":  25220 ,
    "Trinidad and Tobago":  24434 ,
    "Cyprus":  23226 ,
    "Afghanistan":  20842 ,
    "Nepal":  19636 ,
    "Honduras":  19385 ,
    "Bosnia and Herzegovina":  18344 ,
    "Brunei":  17257 ,
    "Gabon":  17228 ,
    "Iceland":  17071 ,
    "Cambodia":  16709 ,
    "Georgia":  16530 ,
    "Mozambique":  16386 ,
    "Botswana":  15813 ,
    "Senegal":  15579 ,
    "Papua New Guinea":  15413 ,
    "Jamaica":  14362 ,
    "Equatorial Guinea":  14308 ,
    "Congo, Rep.":  14135 ,
    "Chad":  13922 ,
    "Zimbabwe":  13663 ,
    "Namibia":  13430 ,
    "Albania":  13370 ,
    "South Sudan":  13070 ,
    "West Bank and Gaza":  12738 ,
    "Mauritius":  12616 ,
    "Burkina Faso":  12543 ,
    "Mali":  12074 ,
    "Mongolia":  12016 ,
    "Nicaragua":  11806 ,
    "Laos":  11772 ,
    "Macedonia, FYR":  11324 ,
    "Armenia":  10882 ,
    "Madagascar":  10593 ,
    "Malta":  9643 ,
    "Tajikistan":  9242 ,
    "Benin":  8747 ,
    "Haiti":  8713 ,
    "Bahamas":  8511 ,
    "Niger":  8169 ,
    "Moldova":  7944 ,
    "Rwanda":  7890 ,
    "Kyrgyzstan":  7404 ,
    "Kosovo":  7274 ,
    "Guinea":  6624 ,
    "Bermuda":  5574 ,
    "Liechtenstein": 5488,
    "Suriname":  5299 ,
    "Mauritania":  5061 ,
    "Sierra Leone":  4892 ,
    "Montenegro":  4583 ,
    "Togo":  4518 ,
    "Barbados":  4348 ,
    "Malawi":  4258 ,
    "Fiji":  4030 ,
    "Eritrea":  3858 ,
    "Swaziland":  3400 ,
    "Andorra": 3249,
    "Guyana":  3228 ,
    "Burundi":  3094 ,
    "Maldives":  3032 ,
    "Faeroe Islands": 2613,
    "Lesotho":  2088 ,
    "Liberia":  2027 ,
    "Cabo Verde":  1871 ,
    "Bhutan":  1821 ,
    "Central African Republic":  1783 ,
    "Belize":  1624 ,
    "Djibouti":  1582 ,
    "Timor-Leste":  1552 ,
    "Seychelles":  1406 ,
    "St. Lucia":  1365 ,
    "Antigua and Barbuda":  1269 ,
    "Solomon Islands":  1158 ,
    "Guinea-Bissau":  1022 ,
    "Grenada":  882 ,
    "St. Kitts and Nevis":  833 ,
    "Gambia":  807 ,
    "Vanuatu":  802 ,
    "Samoa":  801 ,
    "St. Vincent and the Grenadines":  729 ,
    "Comoros":  648 ,
    "Dominica":  538 ,
    "Tonga":  434 ,
    "Sao Tome and Principe":  335 ,
    "Micronesia, Fed. Sts.":  316 ,
    "Palau":  251 ,
    "Marshall Islands":  191 ,
    "Kiribati":  167 ,
    "Tuvalu":  38,
    "Syria": 40410,
    "Western Sahara": 906,
    "Somalia": 917
}

# import csv
#
# with open('co2.csv', 'rb') as f:
#     csv = csv.reader(f)
#     for country in csv:
#         name = country[0]
#         co2 = country[-3]
#         if co2 is '':
#             continue
#         co2 = int(round(float(co2), -1))
#         print '"%s": %i,' % (name, co2)

from BeautifulSoup import BeautifulSoup
import os, sys, re

svg = open('blank-map.svg', 'r').read()
soup = BeautifulSoup(svg, selfClosingTags=['path', 'defs'])
paths = soup.findAll(['path', 'g'])

style = 'fill-opacity:1;stroke:#ffffff;stroke-width:1.20901442;stroke-miterlimit:3.97446823;stroke-dasharray:none;stroke-opacity:1;fill:'

for path in paths:
		
	try:
		if 'lake' in path['class']: continue
		country_id = path['class'][-2:]
	except:
		try: 
			country_id = path['id']
		except:
			continue
    
	if country_id in countries:
		country = countries[country_id]
	else:
		continue

	try:
		rate = co2[country] / float(gdp[country]) * 200
		print country + ': ' + str(rate)
	except:
		print 'CANT CALCULATE: ' + country 
		continue
    
	if rate == 0:
		red = green = blue = 255
	elif rate > 60:
		red = 255
		green = 315 - rate if rate < 315 else 0
		blue = 0
	else: 
		red = rate * 4
		green = 255
		blue = 0
	 
   	rgb = (red, green, blue)
	color = '#%02x%02x%02x' % rgb

	path['style'] = style + color

	r = open('blank-map.svg', 'r')
	header = r.readlines()[0:68]
	r.close()

	new = open('new.svg', 'w+')
	new.write(soup.prettify())
	new.close()
	new = open('new.svg','r')
	body = new.readlines()[29:-1]
	os.remove('new.svg')
	
	os.remove('world-map.svg')
	f = open('world-map.svg', 'w+')
	f.writelines(header)
	f.writelines(body)
	f.close()

